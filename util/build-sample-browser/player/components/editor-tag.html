<editor>
    <div  id="editor">
    </div>

    <script>

        this.on("update", function() {
            console.log("editor update", opts, this);
            if (this.session && (!opts.hasOwnProperty("if") || opts.if )) {
                this.session.setValue(fileUtil.asText(opts.file));
            }
        });

        this.on("mount", function() {
            this.editor = ace.edit("editor");
            this.editor.setTheme("ace/theme/monokai");
            this.editor.setShowPrintMargin(false);
            this.editor.setOptions({
                enableBasicAutocompletion: true,
                enableSnippets: true
            });

            this.session = this.editor.getSession();
            this.session.setUseWrapMode(true);
            this.session.setMode("ace/mode/lua");
            this.session.setValue(fileUtil.asText(opts.file));
        });
    </script>
</editor>